# System Diagrams

## ğŸ¯ High-Level Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Kubernetes Cluster                         â”‚
â”‚                                                               â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚   â”‚  Namespace  â”‚  â”‚  Namespace  â”‚  â”‚  Namespace  â”‚        â”‚
â”‚   â”‚ jira-trackerâ”‚  â”‚   vimana    â”‚  â”‚ production  â”‚        â”‚
â”‚   â”‚             â”‚  â”‚             â”‚  â”‚             â”‚        â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â”¤  â”‚  â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â”¤  â”‚  â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â”¤        â”‚
â”‚   â”‚  â”‚Podâ”‚ â”‚Podâ”‚  â”‚  â”‚Podâ”‚ â”‚Podâ”‚  â”‚  â”‚Podâ”‚ â”‚Podâ”‚        â”‚
â”‚   â”‚  â””â”€â”€â”€â”˜ â””â”€â”€â”€â”¤  â”‚  â””â”€â”€â”€â”˜ â””â”€â”€â”€â”¤  â”‚  â””â”€â”€â”€â”˜ â””â”€â”€â”€â”¤        â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚          â”‚                â”‚                â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                â”‚                â”‚
           â”‚  kubectl       â”‚  kubectl       â”‚  kubectl
           â”‚  get pods      â”‚  get pods      â”‚  get pods
           â”‚  logs          â”‚  logs          â”‚  logs
           â”‚                â”‚                â”‚
      â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
      â”‚ Agent 1 â”‚      â”‚ Agent 2 â”‚     â”‚ Agent 3 â”‚
      â”‚ Node.js â”‚      â”‚ Node.js â”‚     â”‚ Node.js â”‚
      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
           â”‚                â”‚                â”‚
           â”‚  POST          â”‚  POST          â”‚  POST
           â”‚  /api/agent/   â”‚  /api/agent/   â”‚  /api/agent/
           â”‚  update        â”‚  update        â”‚  update
           â”‚                â”‚                â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                              â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
                              â”‚  Backend   â”‚
                              â”‚  Express   â”‚
                              â”‚  Node.js   â”‚
                              â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚                     â”‚
                    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
                    â”‚  MySQL   â”‚         â”‚  REST   â”‚
                    â”‚ Database â”‚         â”‚   API   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
                                              â”‚
                                         GET  â”‚  /api/namespaces
                                         GET  â”‚  /api/pods
                                         GET  â”‚  /api/errors
                                              â”‚
                                        â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
                                        â”‚  Frontend  â”‚
                                        â”‚   React    â”‚
                                        â”‚  Tailwind  â”‚
                                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                              â”‚
                                        â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
                                        â”‚   User's   â”‚
                                        â”‚  Browser   â”‚
                                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Data Flow Sequence

### Monitoring Flow (Agent â†’ Backend â†’ Database)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                        
â”‚  Agent  â”‚                                                        
â”‚  Start  â”‚                                                        
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                                                        
     â”‚                                                             
     â”‚ 1. Parse --namespace argument                              
     â–¼                                                             
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                               
â”‚ Check kubectl   â”‚                                               
â”‚   available     â”‚                                               
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                               
     â”‚                                                             
     â”‚ 2. Every 10 seconds                                        
     â–¼                                                             
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                          
â”‚ kubectl get pods     â”‚                                          
â”‚   -n <namespace>     â”‚                                          
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                          
     â”‚                                                             
     â”‚ 3. For each pod                                            
     â–¼                                                             
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     
â”‚  Check status    â”‚â”€â”€â”€â–¶â”‚   Pod Running?   â”‚                     
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     
                             â”‚                                    
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    
              â”‚                             â”‚                    
           YESâ”‚                          NO â”‚                    
              â–¼                             â–¼                    
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           
    â”‚ Mark as running â”‚          â”‚  kubectl logs    â”‚           
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚  <pod-name>      â”‚           
         â”‚                       â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           
         â”‚                            â”‚                          
         â”‚                            â”‚ 4. Scan for errors      
         â”‚                            â–¼                          
         â”‚                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            
         â”‚                â”‚  Pattern matching:     â”‚            
         â”‚                â”‚  - CrashLoopBackOff   â”‚            
         â”‚                â”‚  - OOMKilled          â”‚            
         â”‚                â”‚  - Error:             â”‚            
         â”‚                â”‚  - Failed             â”‚            
         â”‚                â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            
         â”‚                     â”‚                                
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                
                    â”‚                                            
                    â”‚ 5. Build JSON payload                     
                    â–¼                                            
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             
         â”‚  {                     â”‚                             
         â”‚    namespace: "...",   â”‚                             
         â”‚    pods: [{...}]       â”‚                             
         â”‚  }                     â”‚                             
         â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             
              â”‚                                                  
              â”‚ 6. POST to backend                              
              â–¼                                                  
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    
    â”‚  Backend API         â”‚                                    
    â”‚  /api/agent/update   â”‚                                    
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    
         â”‚                                                       
         â”‚ 7. Process data                                      
         â–¼                                                       
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    
    â”‚  Get/Create          â”‚                                    
    â”‚  Namespace           â”‚                                    
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    
         â”‚                                                       
         â”‚ 8. For each pod                                      
         â–¼                                                       
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    
    â”‚  Upsert Pod          â”‚                                    
    â”‚  (name, status)      â”‚                                    
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    
         â”‚                                                       
         â”‚ 9. Insert errors                                     
         â–¼                                                       
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    
    â”‚  MySQL INSERT        â”‚                                    
    â”‚  INTO errors         â”‚                                    
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    
         â”‚                                                       
         â”‚ 10. Return success                                   
         â–¼                                                       
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    
    â”‚  Agent receives OK   â”‚                                    
    â”‚  Wait 10 seconds     â”‚                                    
    â”‚  Repeat...           â”‚                                    
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    
```

### Dashboard Flow (User â†’ Frontend â†’ Backend â†’ Database)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                  
â”‚    User     â”‚                                                  
â”‚  Opens URL  â”‚                                                  
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                                                  
       â”‚                                                         
       â”‚ http://localhost:5173                                  
       â–¼                                                         
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                
â”‚   React App  â”‚                                                
â”‚    Loads     â”‚                                                
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                                
       â”‚                                                         
       â”‚ useEffect() runs                                       
       â–¼                                                         
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        
â”‚  Parallel API Calls: â”‚                                        
â”‚  1. GET /api/stats   â”‚                                        
â”‚  2. GET /api/ns      â”‚                                        
â”‚  3. GET /api/errors  â”‚                                        
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                        
       â”‚                                                         
       â”‚ Every 5 seconds                                        
       â–¼                                                         
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               
â”‚  Backend API       â”‚â”€â”€â”€â”€â”€â–¶â”‚  MySQL Query    â”‚               
â”‚  Processes request â”‚      â”‚  SELECT * FROM  â”‚               
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               
       â”‚                                                         
       â”‚ JSON Response                                          
       â–¼                                                         
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                            
â”‚  setState()      â”‚                                            
â”‚  Update UI       â”‚                                            
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                            
       â”‚                                                         
       â”‚ React re-renders                                       
       â–¼                                                         
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    
â”‚   Updated Dashboard:     â”‚                                    
â”‚   - Stats cards refresh  â”‚                                    
â”‚   - Pod list updates     â”‚                                    
â”‚   - Error feed updates   â”‚                                    
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    
       â”‚                                                         
       â”‚ User clicks pod                                        
       â–¼                                                         
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        
â”‚  GET /api/pods/:id/  â”‚                                        
â”‚      errors          â”‚                                        
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                        
       â”‚                                                         
       â”‚ Display modal                                          
       â–¼                                                         
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        
â”‚  Error Details View  â”‚                                        
â”‚  - Error messages    â”‚                                        
â”‚  - Timestamps        â”‚                                        
â”‚  - Error types       â”‚                                        
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                        
```

---

## ğŸ—„ï¸ Database Entity Relationship

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      NAMESPACES         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ”‘ id (PK)              â”‚
â”‚ ğŸ“ name (UNIQUE)        â”‚
â”‚ ğŸ“… created_at           â”‚
â”‚ ğŸ“… updated_at           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”‚ 1:N
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        PODS             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ”‘ id (PK)              â”‚
â”‚ ğŸ“ name                 â”‚
â”‚ ğŸ”— namespace_id (FK)    â”‚â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“Š status               â”‚      â”‚
â”‚ â° last_check           â”‚      â”‚
â”‚ ğŸ“… created_at           â”‚      â”‚
â”‚ ğŸ“… updated_at           â”‚      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
             â”‚                   â”‚
             â”‚ 1:N               â”‚
             â”‚                   â”‚
             â–¼                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚       ERRORS            â”‚      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”‚
â”‚ ğŸ”‘ id (PK)              â”‚      â”‚
â”‚ ğŸ”— pod_id (FK)          â”‚â”€â”€â”€â”€â”€â”€â”˜
â”‚ ğŸ“ message (TEXT)       â”‚
â”‚ ğŸ·ï¸ error_type           â”‚
â”‚ â° timestamp            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Legend:
ğŸ”‘ Primary Key
ğŸ”— Foreign Key  
ğŸ“ Text/String
ğŸ“Š Enum
â° Timestamp
ğŸ“… Datetime
```

---

## ğŸ“± Frontend Component Tree

```
App (Main Container)
â”‚
â”œâ”€â”€ Header
â”‚   â”œâ”€â”€ Title (with gradient)
â”‚   â””â”€â”€ LiveIndicator (pulsing dot)
â”‚
â”œâ”€â”€ StatsSection
â”‚   â”œâ”€â”€ NamespacesCard
â”‚   â”‚   â”œâ”€â”€ Icon (blue)
â”‚   â”‚   â””â”€â”€ Count
â”‚   â”œâ”€â”€ RunningPodsCard
â”‚   â”‚   â”œâ”€â”€ Icon (green)
â”‚   â”‚   â””â”€â”€ Count
â”‚   â”œâ”€â”€ ErrorPodsCard
â”‚   â”‚   â”œâ”€â”€ Icon (red)
â”‚   â”‚   â””â”€â”€ Count
â”‚   â””â”€â”€ ErrorsTodayCard
â”‚       â”œâ”€â”€ Icon (yellow)
â”‚       â””â”€â”€ Count
â”‚
â””â”€â”€ MainContent (3-column grid)
    â”‚
    â”œâ”€â”€ Sidebar (col 1)
    â”‚   â”œâ”€â”€ NamespaceList
    â”‚   â”‚   â””â”€â”€ NamespaceButton[] (clickable)
    â”‚   â””â”€â”€ RecentErrors
    â”‚       â””â”€â”€ ErrorCard[] (scrollable)
    â”‚
    â””â”€â”€ PodDashboard (col 2-3)
        â”œâ”€â”€ Header (namespace name)
        â””â”€â”€ PodGrid (2-column)
            â””â”€â”€ PodCard[]
                â”œâ”€â”€ StatusIcon (âœ…/âŒ)
                â”œâ”€â”€ PodName
                â”œâ”€â”€ StatusBadge
                â”œâ”€â”€ ErrorCount (if any)
                â””â”€â”€ LastCheckTime
                â””â”€â”€ onClick â†’ ErrorModal

ErrorModal (conditional render)
â”‚
â”œâ”€â”€ ModalOverlay (dark background)
â””â”€â”€ ModalContent
    â”œâ”€â”€ Header
    â”‚   â”œâ”€â”€ PodName
    â”‚   â””â”€â”€ CloseButton
    â””â”€â”€ ErrorList (scrollable)
        â””â”€â”€ ErrorItem[]
            â”œâ”€â”€ ErrorTypeBadge
            â”œâ”€â”€ Timestamp
            â””â”€â”€ MessageBlock (code style)
```

---

## ğŸ”€ State Flow in React

```
Initial State (on mount)
â”‚
â”œâ”€â”€ loading: true
â”œâ”€â”€ namespaces: []
â”œâ”€â”€ pods: []
â”œâ”€â”€ stats: null
â”œâ”€â”€ recentErrors: []
â”œâ”€â”€ selectedNamespace: null
â”œâ”€â”€ selectedPod: null
â”œâ”€â”€ podErrors: []
â””â”€â”€ showErrorModal: false

        â”‚
        â”‚ useEffect() triggers
        â–¼

Fetch Initial Data (parallel)
â”‚
â”œâ”€â”€ fetchStats() â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”œâ”€â”€ fetchNamespaces() â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”
â””â”€â”€ fetchRecentErrors() â”€â”€â”€â”€â”€â”€â”˜      â”‚
                                     â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚ All promises resolve
        â–¼

Updated State
â”‚
â”œâ”€â”€ loading: false
â”œâ”€â”€ namespaces: [{id:1, name:"jira"}]
â”œâ”€â”€ stats: {total_ns: 1, ...}
â”œâ”€â”€ recentErrors: [...]
â””â”€â”€ selectedNamespace: namespaces[0] â”€â”€â”€â”€â”
                                         â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚ triggers useEffect dependency
        â–¼

Fetch Pods for Selected Namespace
â”‚
â””â”€â”€ fetchPods(selectedNamespace.id)
        â”‚
        â–¼
    pods: [{id:1, name:"web-pod", status:"running"}]

        â”‚
        â”‚ Every 5 seconds (setInterval)
        â–¼

Refresh All Data
â”‚
â”œâ”€â”€ fetchStats()
â”œâ”€â”€ fetchNamespaces()
â”œâ”€â”€ fetchRecentErrors()
â””â”€â”€ if (selectedNamespace) fetchPods()

        â”‚
        â”‚ User clicks pod
        â–¼

Handle Pod Click
â”‚
â”œâ”€â”€ setSelectedPod(pod)
â”œâ”€â”€ fetchPodErrors(pod.id) â”€â”€â”€â”
â””â”€â”€ setShowErrorModal(true)   â”‚
                              â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
    podErrors: [{id:1, message:"...", type:"Error"}]
    (Modal displays)

        â”‚
        â”‚ User closes modal
        â–¼

setShowErrorModal(false)
(Back to main view)
```

---

## ğŸ”§ Agent State Machine

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   START     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Parse args
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  INITIALIZE  â”‚
â”‚  - namespace â”‚
â”‚  - config    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Check kubectl
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   VALIDATE   â”‚â”€â”€NOâ”€â”€â–¶â”‚    ERROR     â”‚
â”‚   kubectl    â”‚       â”‚  Exit(1)     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ YES
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   MONITORING     â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  â”‚          â”‚
â”‚  Every 10s:      â”‚          â”‚
â”‚  1. Get pods     â”‚          â”‚
â”‚  2. Check status â”‚          â”‚
â”‚  3. Analyze logs â”‚          â”‚
â”‚  4. Send data    â”‚          â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
       â”‚                      â”‚
       â”‚ Success              â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ SIGINT/SIGTERM
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   CLEANUP    â”‚
â”‚  Clear timer â”‚
â”‚   Exit(0)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸŒ API Request/Response Flow

### POST /api/agent/update

**Request:**
```json
{
  "namespace": "jira-tracker",
  "pods": [
    {
      "name": "web-pod-abc123",
      "status": "error",
      "errors": [
        {
          "message": "Error: Connection timeout",
          "type": "Error"
        }
      ]
    }
  ]
}
```

**Backend Processing:**
```
1. Validate request body
   â””â”€> namespace present? âœ“
   â””â”€> pods is array? âœ“

2. Get/Create Namespace
   â””â”€> INSERT OR UPDATE namespaces
   â””â”€> Get namespace ID

3. For each pod:
   â””â”€> INSERT OR UPDATE pods
   â””â”€> Get pod ID
   
4. For each error:
   â””â”€> INSERT INTO errors
   
5. Commit transaction

6. Return success
```

**Response:**
```json
{
  "success": true,
  "message": "Data updated successfully"
}
```

### GET /api/namespaces/:id/pods

**Request:**
```
GET /api/namespaces/1/pods
```

**Backend Processing:**
```
1. Parse namespace ID from URL

2. Query database:
   SELECT 
     p.id, p.name, p.status, p.last_check,
     COUNT(e.id) as error_count
   FROM pods p
   LEFT JOIN errors e ON p.id = e.pod_id
   WHERE p.namespace_id = 1
   GROUP BY p.id

3. Format results

4. Return JSON
```

**Response:**
```json
[
  {
    "id": 1,
    "name": "web-pod-abc123",
    "status": "error",
    "last_check": "2025-11-02T12:34:56.000Z",
    "error_count": 3
  },
  {
    "id": 2,
    "name": "api-pod-def456",
    "status": "running",
    "last_check": "2025-11-02T12:34:58.000Z",
    "error_count": 0
  }
]
```

---

## ğŸ¨ UI Color Scheme

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Color Palette                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  Background (Dark Theme):               â”‚
â”‚  â–“â–“â–“â–“â–“ Gray-900 (#111827)              â”‚
â”‚  â–“â–“â–“â–“â–“ Gray-800 (#1F2937)              â”‚
â”‚                                         â”‚
â”‚  Status Colors:                         â”‚
â”‚  â–ˆâ–ˆâ–ˆâ–ˆ Green-500 (#10B981) - Running    â”‚
â”‚  â–ˆâ–ˆâ–ˆâ–ˆ Red-500 (#EF4444) - Error        â”‚
â”‚  â–ˆâ–ˆâ–ˆâ–ˆ Yellow-500 (#F59E0B) - Warning   â”‚
â”‚  â–ˆâ–ˆâ–ˆâ–ˆ Blue-500 (#3B82F6) - Info        â”‚
â”‚                                         â”‚
â”‚  Accents:                               â”‚
â”‚  â–ˆâ–ˆâ–ˆâ–ˆ Purple-500 (#A855F7)             â”‚
â”‚  â–ˆâ–ˆâ–ˆâ–ˆ Blue-400 (#60A5FA)               â”‚
â”‚                                         â”‚
â”‚  Text:                                  â”‚
â”‚  â–“â–“â–“â–“â–“ White (#FFFFFF)                 â”‚
â”‚  â–“â–“â–“â–“â–“ Gray-300 (#D1D5DB)              â”‚
â”‚  â–“â–“â–“â–“â–“ Gray-400 (#9CA3AF)              â”‚
â”‚  â–“â–“â–“â–“â–“ Gray-500 (#6B7280)              â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Performance Metrics

```
Component          Operation          Time      
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Agent              Pod check          ~500ms   
Agent              Log fetch          ~1s      
Agent              Pattern match      ~10ms    
Backend            API request        ~50ms    
Backend            DB query           ~20ms    
Frontend           Initial load       ~1s      
Frontend           Refresh            ~200ms   
End-to-End         Detectionâ†’Display  ~2-3s    
```

---

These diagrams provide a comprehensive visual understanding of the system architecture, data flow, and component interactions!
